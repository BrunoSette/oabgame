function getMoedas(){return parseInt($("#userCash").html())}function getPontuacao(){return parseInt($("#userScore").html())}function updateMoedas(e){var t=$("#userCash").html();t=parseInt(t)+e;$("#userCash").html(t)}function updatePontuacao(e){var t=$("#userScore").html();t=parseInt(t)+e;$("#userScore").html(t)}function bloqueaShowDoMilhao(){var e=new Modal;e.setCor("#E74C3C");e.setTitulo("Saldo insuficiente");e.setTexto("Você não possui saldo suficiente para utilizar esta funcionalidade. Continue jogando e acumulando pontos!<br /><br />");e.showModal("F")}function notificaErro(){var e="<form action='javascript:void(0)' id='formEnviaErro' class='form form-aligned'>";e+="<div class='control-group'>";e+="<label for=''>Qual o erro desta pergunta: </label><br />";e+="<input type='radio' name='error' value='1'> A pergunta contém erro de ortografia.<br />";e+="<input type='radio' name='error' value='2'> A pergunta não possui resposta correta.<br />";e+="<input type='radio' name='error' value='3'> A pergunta possui caracteres especiais.<br />";e+="<br />";e+="<label for=''>Comentário Opcional</label><br />";e+="<textarea class='mt10' name='comment'></textarea>";e+="</div>";e+="</form>";var t="<p class='right'>";t+="<button class='btn btn-cancel' id='modal-action' data-tipo='fechar'>Cancelar</button>";t+="<button class='btn btn-info ml5' id='sendNotification'>Enviar</button>";t+="</p>";$(".box-overlay").css("opacity","1").css("visibility","visible");$(".box-modal > .box-content").css("visibility","visible");$(".box-modal h3").css("background-color","#3498db").text("Reportar pergunta");$(".box-modal > .box-content > div > p").html(e);$("#modal-action").attr("data-tipo","enviarErro");$(".box-modal > .box-content > p").css("overflow","hidden");$(".box-modal > .box-content > p").html(t)}function isCorrect(e){if(isUndefined(e)){var t=new Modal;t.setTitulo("Resposta em branco");t.setTexto("Você não selecionou nenhuma resposta. Para prosseguir selecione a respota correta.");t.showModal("F")}else{var n=false;var r;if(gabarito==e){var i="Parabéns, sua resposta está correta. Continue jogando e aprendendo.<br /><br />Comentário: "+comentario;if(video)i+="<br /><div class='video-wrapper'><iframe width='480' height='360' src='"+video+"' frameborder='0' allowfullscreen></iframe></div>";var t=new Modal;t.setCor("#1ABC9C");t.setTitulo("Parabéns ! Você acertou");t.setTexto(i);t.showModal("P");$.ajax({type:"post",url:rootUrl+"/Usuario/pontuation_geral",dataType:"json",success:function(e){updatePontuacao(100);if(verificaPontuacao())atualizaPerfil()},error:function(e){console.info(e)}});data={pontuation:RESPOSTA_CORRETA};r=RESPOSTA_CORRETA;n=true;acertosSeguidos++;badge_acertos_seguidos();badge_acertos()}else{var s=$('.teste[data-option="'+gabarito+'"]').html();var i="Que pena, você errou a questão. <br />Resposta certa: "+s+"(Letra "+gabarito+")<br /><br />Comentário: "+comentario;if(video)i+="<br /><div class='video-wrapper'><iframe width='480' height='360' src='"+video+"' frameborder='0' allowfullscreen></iframe></div>";var t=new Modal;t.setCor("#E74C3C");t.setTitulo("Resposta errada");t.setTexto(i);t.showModal("P");data={pontuation:RESPOSTA_ERRADA};r=RESPOSTA_ERRADA;acertosSeguidos=0}if(getMoedas()+r>=0){$.ajax({type:"post",url:rootUrl+"/Usuario/pontuation",data:JSON.stringify(data),dataType:"json",success:function(e){updateMoedas(r)},error:function(e){console.info(e)}})}data=JSON.stringify({questao:idQuestao,user_acertou:n,user_resposta:e});$.ajax({type:"post",url:rootUrl+"/Usuario/do_question",data:data,dataType:"json",error:function(e){console.info(e)}})}$("html, body").animate({scrollTop:0},1e3)}function findQuestion(){$.ajax({type:"get",url:rootUrl+"/Questoes/questao",dataType:"json",success:function(e){for(var t=0;t<4;t++){chr=String.fromCharCode(65+t);if($('.teste[data-option="'+chr+'"]').css("text-decoration")=="line-through")$('.teste[data-option="'+chr+'"]').css("text-decoration","initial")}$(".question").text("("+e.result.organizadora+" - "+e.result.concurso+"/"+e.result.ano+") "+e.result.enunciado);$("header span").text(e.result.id);$("label[for='A'] > p:last-child").text(e.result.alternativa_a);$("label[for='B'] > p:last-child").text(e.result.alternativa_b);$("label[for='C'] > p:last-child").text(e.result.alternativa_c);$("label[for='D'] > p:last-child").text(e.result.alternativa_d);$(".subject").text(e.result.titulo);gabarito=e.result.gabarito;comentario=e.result.comentario;idQuestao=e.result.id;video=e.result.video_embed},error:function(e){console.info(e)}})}function eliminarResposta(){var e;ga("send","event","Respostas","EliminarResposta");do{e=String.fromCharCode(65+Math.floor(Math.random()*10+1)%3)}while(e==gabarito);data=JSON.stringify({pontuation:ELIMINAR_RESPOSTA});$.ajax({type:"post",url:rootUrl+"/Usuario/pontuation",data:data,dataType:"json",success:function(e){updateMoedas(ELIMINAR_RESPOSTA)},error:function(e){console.info(e)}});$('.teste[data-option="'+e+'"]').css("text-decoration","line-through");$("html, body").animate({scrollTop:0},1e3)}function pularPergunta(){data=JSON.stringify({pontuation:PULAR_PERGUNTA});ga("send","event","Respostas","PularPergunta");$.ajax({type:"post",url:rootUrl+"/Usuario/pontuation",data:data,dataType:"json",success:function(e){updateMoedas(PULAR_PERGUNTA)},error:function(e){console.info(e)}});$("html, body").animate({scrollTop:0},1e3);findQuestion()}$(".box-modal").delegate("#sendNotification","click",function(){var e=$(".box-modal textarea").val();var t=$(".box-modal input[name=ans]:checked").val();var n=$(".box-modal input[name=ans]").val();if(n==1){url=rootUrl+"/Anuncios/register";data=JSON.stringify({pontuation:RESPONDEU_ENQUETE});$.ajax({type:"post",url:rootUrl+"/Usuario/pontuation",data:data,dataType:"json",success:function(e){updateMoedas(RESPONDEU_ENQUETE)},error:function(e){console.info(e)}})}else url=rootUrl+"/Questoes/error_notification";data=JSON.stringify({comment:e,ans:t});$.ajax({type:"post",url:url,dataType:"json",data:data,success:function(e){console.info(e.result)},error:function(e){console.info(e.result)}});closeModal()});$("#enviarResposta").on("click",function(){ga("send","event","Respostas","Responder");var e=$("input[name='option']:checked").val();isCorrect(e)});$(document).ready(function(){var e=false;var t=false;var n=getMoedas();$("#eliminar-resposta").bind("click",function(){if(n>5){if(!e){eliminarResposta();e=true}}else bloqueaShowDoMilhao()});$("#pular-pergunta").bind("click",function(){if(n>5)pularPergunta();else bloqueaShowDoMilhao()});verificarPrimeiroAcesso();obtemRanking();findQuestion()})